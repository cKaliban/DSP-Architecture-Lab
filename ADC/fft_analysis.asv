Fs = 50*10^3;
L = 1024;

S1 = csvread("adc_data_irq_1khz_numerical.txt");
S2 = csvread("adc_data_dma_1khz_numerical.txt");

X1 = fft(S1,1024);
P2 = abs(X1/L);
P1 = P2(1:L/2+1);
P1(2:end-1) = 2*P1(2:end-1);

f = Fs*(0:L/2)/L;

figure
plot(f,P1)
title('Single-Sided Amplitude Spectrum of S1')
xlim([0,5000]);
xlabel('f (Hz)')
ylabel('|P1(f)|')